# program
import ast
from _pyrepl.completing_reader import complete

def getAction():
    user_input = input("Pick a number:\n 1 - Add task \n 2 - View Tasks \n 3 - Mark Task Complete "
            "\n 4 - Delete Task \n 5 - Logout \n You Picked: ")
    return user_input

def load_convert():
    # opens file task.txt converts strings in to list of dictionaries and returns the list
    tasks_dict_list = []
    with open("tasks.txt", "r") as file:
        task_data = file.read().splitlines()
        if task_data:
            for i in range(len(task_data)):
                tasks_data_dict = ast.literal_eval(task_data[i])
                tasks_dict_list.append(tasks_data_dict)
        else:
            # print("No current tasks \n")
            return 'empty'
        return tasks_dict_list

def convert_write(dict_list):
    # converts list of dictionaries to strings and writes to file task.txt
    tasks_data_list = []
    tasks_dict_list = dict_list
    for i in range(len(tasks_dict_list)):
        tasks_data_list.append(str(tasks_dict_list[i]))
    for i in range(len(tasks_data_list)):
        tasks_data_list[i] = tasks_data_list[i] + '\n'
    with open("tasks.txt", "w") as file:
        for i in range(len(tasks_data_list)):
            file.writelines(tasks_data_list[i])
    return

def main():

    while True:
        action = getAction()
        match action:
            case "1":   #  Add Task
                task = input("Enter the task: ")
                tasks_dict_list = load_convert()
                if tasks_dict_list != 'empty':
                    old_index = tasks_dict_list[-1].get("Task #")
                    task_obj = {'Task #': old_index + 1, 'Status': 'pending', 'Description': task}
                    tasks_dict_list.append(task_obj)
                    convert_write(tasks_dict_list)
                else:
                    tasks_dict_list = []
                    task_obj = {'Task #': 1, 'Status': 'pending', 'Description': task}
                    tasks_dict_list.append(task_obj)
                    convert_write(tasks_dict_list)

            case "2":  #  View tasks
                tasks_dict_list = load_convert()
                if tasks_dict_list != 'empty':
                    for i in range(len(tasks_dict_list)):
                        print(f" Task #:", tasks_dict_list[i].get("Task #"),
                              "  Status:", tasks_dict_list[i].get("Status"), "\n",
                              "Description:",tasks_dict_list[i].get("Description"), "\n")
                else:
                    print("No current tasks \n")

            case "3":   #  Mark Task as complete
                tasks_dict_list = load_convert()
                if tasks_dict_list != 'empty':
                    task_to_mark_complete = int(input("Enter the task to mark complete: "))
                    for i in range(len(tasks_dict_list)):
                        task_id = tasks_dict_list[i].get("Task #")
                        if task_to_mark_complete == task_id:
                            tasks_dict_list[i]['Status'] = 'complete'
                            break
                    convert_write(tasks_dict_list)
                else:
                    print("No current tasks \n")

            case "4":   # Delete Task
                tasks_dict_list = load_convert()
                if tasks_dict_list != 'empty':
                    task_to_delete = int(input("Enter the task to delete: "))
                    for i in range(len(tasks_dict_list)):
                        task_id = tasks_dict_list[i].get("Task #")
                        if task_to_delete == task_id:
                            tasks_dict_list.remove(tasks_dict_list[i])
                            break
                    convert_write(tasks_dict_list)
                else:
                    print("No current tasks \n")

            case "5":
                quit()
main()
# Program to get user input to create a login and password text based interface and file management

import ast

print(" Login to your account")
user_name = input("Enter your user name: ")
password = input("Enter your password: ")

def load_convert():
    # opens file login.txt converts strings in to list of dictionaries and returns the list
    login_dict_list = []
    with open("login.txt", "r") as file:
        login_data = file.read().splitlines()
        if login_data:
            for i in range(len(login_data)):
                login_data_dict = ast.literal_eval(login_data[i])
                login_dict_list.append(login_data_dict)
            return login_dict_list
        else:
            return 'empty'

def convert_write(dict_list):
    # converts list of dictionaries to strings and writes to file task.txt
    tasks_data_list = []
    tasks_dict_list = dict_list
    for i in range(len(tasks_dict_list)):
        tasks_data_list.append(str(tasks_dict_list[i]))
    for i in range(len(tasks_data_list)):
        tasks_data_list[i] = tasks_data_list[i] + '\n'
    with open("login.txt", "w") as file:
        for i in range(len(tasks_data_list)):
            file.writelines(tasks_data_list[i])


def main():
    while True:
task = input("Enter the task: ")
                tasks_dict_list = load_convert()
                if tasks_dict_list != 'empty':
                    old_index = tasks_dict_list[-1].get("Task #")
                    task_obj = {'Task #': old_index + 1, 'Status': 'pending', 'Description': task}
                    tasks_dict_list.append(task_obj)
                    convert_write(tasks_dict_list)
                else:
                    tasks_dict_list = []
                    task_obj = {'Task #': 1, 'Status': 'pending', 'Description': task}
                    tasks_dict_list.append(task_obj)
                    convert_write(tasks_dict_list)

main()

